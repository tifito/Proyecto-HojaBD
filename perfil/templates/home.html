{% extends 'base.html' %}

{% block content %}
<main class="container py-5">
    <!-- Administrar página (solo si está logueado) -->
    {% if user.is_authenticated %}
        <a href="/admin/" class="btn btn-outline-dark btn-lg"
         target="_blank">
            <i class="bi bi-gear-fill me-2"></i>
            Administrar página
        </a>
    {% endif %}

</div>
    {% if perfil %}
    <!-- ===== PERFIL PRINCIPAL ===== -->
    <section class="card perfil-card border-0 rounded-4 p-4 mb-4">
        <div class="row align-items-center">

            <!-- FOTO PERFIL -->
            <div class="col-md-3 text-center mb-3 mb-md-0">
                <div class="foto-wrapper mx-auto">
                    {% if perfil.fotodeperfil %}
                        <img src="{{ perfil.fotodeperfil.url }}" class="foto-perfil" alt="Foto Perfil">
                    {% elif perfil.fotodeperfil %}
                        <img src="{{ perfil.fotodeperfil }}" class="foto-perfil" alt="Foto Perfil">
                    {% else %}
                        <div class="perfil-placeholder d-flex flex-column justify-content-center align-items-center">
                            <i class="bi bi-person-fill fs-1 text-primary mb-1"></i>
                            <small class="text-muted">Sin foto</small>
                        </div>
                    {% endif %}
                </div>
            </div>

            <!-- DATOS -->
            <div class="col-md-9 text-center text-md-start">
                <h1 class="fw-bold display-6 mb-3 text-dark">
                    {{ perfil.nombres }} {{ perfil.apellidos }}
                </h1>

                <!-- BOTÓN VER HOJA DE VIDA -->
                <div class="mb-3">
                    <a href="{% url 'cv_pdf' %}" class="btn btn-primary btn-lg">
                        Ver Hoja de Vida
                    </a>
                </div>
                <div class="d-flex flex-wrap gap-3 mt-4">


                <div class="row g-3">
                    <!-- Información personal -->
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-calendar-event me-2 text-primary"></i><strong>Fecha de nacimiento:</strong> {{ perfil.fechanacimiento }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-geo-alt me-2 text-primary"></i><strong>Lugar:</strong> {{ perfil.lugarnacimiento }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-flag me-2 text-primary"></i><strong>Nacionalidad:</strong> {{ perfil.nacionalidad }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-person-badge me-2 text-primary"></i><strong>Cédula:</strong> {{ perfil.numerocedula }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-gender-ambiguous me-2 text-primary"></i><strong>Sexo:</strong> {{ perfil.get_sexo_display }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-heart me-2 text-primary"></i><strong>Estado civil:</strong> {{ perfil.estadocivil }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-car-front-fill me-2 text-primary"></i><strong>Licencia:</strong> {{ perfil.licenciaconducir|default:"No" }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-telephone me-2 text-primary"></i><strong>Teléfono:</strong> {{ perfil.telefonoconvencional|default:"No tiene" }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-envelope me-2 text-primary"></i><strong>Email:</strong> {{ perfil.email|default:"No tiene" }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-phone me-2 text-primary"></i><strong>Celular:</strong> {{ perfil.telefonofijo|default:"No tiene" }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-house-door me-2 text-primary"></i><strong>Dirección domiciliaria:</strong> {{ perfil.direcciondomiciliaria|default:"No registrada" }}</p>
                    </div>
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-building me-2 text-primary"></i><strong>Dirección de trabajo:</strong> {{ perfil.direcciontrabajo|default:"No registrada" }}</p>
                    </div>
                    {% if perfil.sitioweb %}
                    <div class="col-sm-6 col-lg-4">
                        <p class="mb-2 text-muted"><i class="bi bi-globe me-2 text-primary"></i><strong>Sitio web:</strong> <a href="{{ perfil.sitioweb }}" target="_blank">{{ perfil.sitioweb }}</a></p>
                    </div>
                    {% endif %}
                </div>
            </div>

        </div>
    </section>

    <!-- ===== PERFIL PROFESIONAL ===== -->
    <section class="card perfil-card border-0 rounded-4 p-4 mb-4">
        <h4 class="fw-bold mb-3 text-dark">
            <i class="bi bi-person-lines-fill me-2 text-primary"></i>
            Perfil Profesional
        </h4>
        <p class="text-muted" style="font-size: 1.05rem; line-height: 1.6;">
            {{ perfil.descripcionperfil }}
        </p>
    </section>

    {% else %}
    <div class="text-center py-5">
        <h4 class="text-muted fw-semibold">
            Este perfil no se encuentra activo.
        </h4>
    </div>
    {% endif %}

</main>

<style>
.perfil-card {
    background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
}

.foto-wrapper {
    width: 190px;
    height: 190px;
    border-radius: 50%;
    background: white;
    padding: 8px;
    box-shadow: 0 6px 14px rgba(0,0,0,0.12);
}

.foto-perfil {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.perfil-placeholder {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: linear-gradient(135deg, #e0f2fe, #bae6fd);
    border: 3px dashed #93c5fd;
}
</style>

{% endblock %}
